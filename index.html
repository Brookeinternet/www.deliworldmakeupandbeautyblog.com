<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Deli's World Makeup & Beauty</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
   <!-- ðŸ’– Hero Section -->
  <header id="hero">
    <h1>Welcome to Deliâ€™s World</h1>
    <p>Your ultimate destination for makeup, beauty tips, and glam subscriptions âœ¨</p>
  </header>
  <nav id="table-of-contents">
  <h2>âœ¨ Explore Deliâ€™s World</h2>
  <ul>
    <li><a href="#hero">Home</a></li>
    <li><a href="#premium-plans">Premium Plans</a></li>
    <li><a href="#authModal">Sign Up</a></li>
    <li><a href="blog1.html">Blog Page 1</a></li> <!-- ðŸ“Œ New link here -->
  </ul>
</nav>


  <!-- Auth Modal -->
  <div id="authModal" style="display:none;">
    <h3>Sign Up</h3>
    <input id="auth-email" type="email" placeholder="Email" />
    <input id="auth-password" type="password" placeholder="Password" />
    <input id="auth-confirm-password" type="password" placeholder="Confirm Password" />
    <button onclick="handleSignUp()">Create Account</button>
  </div>

  <!-- Premium Plans -->
  <section id="premium-plans">
    <h3>Choose Your Plan</h3>
    <div>
      <h4>Basic - $9.99/month</h4>
      <button id="basicSubscribeBtn">Subscribe to Basic</button>
    </div>
    <div>
      <h4>VIP - $19.99/month</h4>
      <button id="vipSubscribeBtn">Join VIP</button>
    </div>
  </section>

  <!-- Firebase + Stripe Scripts -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js"></script>
  <script src="https://js.stripe.com/v3/"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBDeFd1HMO3rQfJu5JzqKXkzq-Oz68dQDk",
      authDomain: "deli-sworld-subscription.firebaseapp.com",
      projectId: "deli-sworld-subscription",
      storageBucket: "deli-sworld-subscription.appspot.com",
      messagingSenderId: "678490444860",
      appId: "1:678490444860:web:3294be895f8033e7d01f39",
      measurementId: "G-4T8CL2174E"
    };
    firebase.initializeApp(firebaseConfig);

    const stripe = Stripe("pk_live_51RXVHEDUGtG6RSaQSRA3mNRjmKDpm3uaS5yqLGQaioQAF4h46xtK8iZAicPPSazyONwHec6nYXpc7QsXRM4KEedu00taF9cnOX");

    function handleSignUp() {
      const email = document.getElementById("auth-email").value;
      const password = document.getElementById("auth-password").value;
      const confirm = document.getElementById("auth-confirm-password").value;

      if (password !== confirm) {
        alert("Passwords do not match!");
        return;
      }

      firebase.auth().createUserWithEmailAndPassword(email, password)
        .then(userCred => {
          alert("Welcome, " + userCred.user.email);
          document.getElementById("authModal").style.display = "none";
        })
        .catch(err => {
          alert("Sign-up error: " + err.message);
        });
    }

    async function redirectToCheckout(plan) {
      const user = firebase.auth().currentUser;
      if (!user) {
        alert("Please sign in to continue.");
        document.getElementById("authModal").style.display = "block";
        return;
      }

      const endpoint = plan === "vip"
        ? "https://www-deliworldmakeupandbeautyblog-com.onrender.com/create-vip-checkout-session"
        : "https://www-deliworldmakeupandbeautyblog-com.onrender.com/create-basic-checkout-session";

      try {
        const res = await fetch(endpoint, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ uid: user.uid, email: user.email })
        });

        const session = await res.json();
        const result = await stripe.redirectToCheckout({ sessionId: session.id });
        if (result.error) alert(result.error.message);
      } catch (err) {
        alert("Checkout error: " + err.message);
      }
    }

    firebase.auth().onAuthStateChanged(user => {
      if (user) {
        document.getElementById("authModal").style.display = "none";
      }
    });

    window.onload = () => {
      document.getElementById("basicSubscribeBtn").onclick = () => redirectToCheckout("basic");
      document.getElementById("vipSubscribeBtn").onclick = () => redirectToCheckout("vip");
    };
  </script>

</body>
</html>
